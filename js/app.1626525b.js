(function(t){function e(e){for(var r,a,s=e[0],l=e[1],c=e[2],f=0,d=[];f<s.length;f++)a=s[f],i[a]&&d.push(i[a][0]),i[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("1356"),i=n.n(r);i.a},"0656":function(t,e,n){},1070:function(t,e,n){"use strict";var r=n("2dce"),i=n.n(r);i.a},1356:function(t,e,n){},"2dce":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Game",{key:t.gameId,attrs:{width:t.difficulty,percent:t.percent,show:!1},on:{resetButtonEvent:function(e){return t.reset()},"resetButtonEvent:difficulty":function(e){return t.reset("difficulty",e)},"resetButtonEvent:percent":function(e){return t.reset("percent",e)}}})],1)},o=[],a=(n("6b54"),n("a481"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{align:"center"}},[n("v-overlay",{attrs:{value:t.lose}},[n("div",{staticClass:"display-4",attrs:{id:"winner-message"}},[t._v("Sorry, you lose.")]),t.lose?n("div",{attrs:{id:"reset-control"}},[n("v-btn",{attrs:{id:"resetButton",large:"",outlined:""},on:{click:function(e){return t.$emit("resetButtonEvent")}}},[t._v("PLAY AGAIN")])],1):t._e()]),n("v-overlay",{attrs:{value:t.won}},[n("div",{staticClass:"display-4",attrs:{id:"winner-message"}},[t._v("Congratulations,  You won!")]),t.won?n("div",{attrs:{id:"reset-control"}},[n("v-btn",{attrs:{id:"resetButton",large:"",outlined:""},on:{click:function(e){return t.$emit("resetButtonEvent")}}},[t._v("PLAY AGAIN")])],1):t._e()]),n("div",{attrs:{id:"game"}},[n("div",{attrs:{id:"controlbar"}},[n("v-text-field",{attrs:{outlined:"",label:"width/height",placeholder:"10",id:"difficulty",value:"width"},on:{change:function(e){return t.$emit("resetButtonEvent:difficulty",t.mutableDifficulty)}},model:{value:t.mutableDifficulty,callback:function(e){t.mutableDifficulty=e},expression:"mutableDifficulty"}}),n("v-text-field",{attrs:{outlined:"",label:"bomb percentage",placeholder:"50%",id:"percentage",value:"percent"},on:{change:function(e){return t.$emit("resetButtonEvent:percent",t.mutablePercentage)}},model:{value:t.mutablePercentage,callback:function(e){t.mutablePercentage=e},expression:"mutablePercentage"}})],1),n("div",{attrs:{id:"stats"}},[n("v-chip",{attrs:{label:"",outlined:"",color:"#4CAF50"}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-square")]),t._v("\n        "+t._s(this.spaces)+"\n      ")],1),n("v-chip",{attrs:{label:"",outlined:"",color:"#B71C1C"}},[n("v-icon",{attrs:{left:"",color:"#000000"}},[t._v("mdi-bomb")]),t._v("\n        "+t._s(this.numberOfBombsToPlace)+"\n      ")],1)],1),n("div",{staticClass:"gameboard",attrs:{id:"gameboard"}},[n("table",{class:["game",t.lose?"isNotClickable":""]},[n("tbody",t._l(t.initializedGameBoard,function(e,r){return n("tr",{key:e.id},t._l(e,function(e){return n("td",{key:e.id},[t.mutableShow?n("div",[n("span",{staticClass:"secret"},[t._v(t._s(e.value))])]):t._e(),n("Cell",{attrs:{width:t.width,row:r,mine:e.value,index:e.index,adjacents:e.adjacents,adjacentCellIndexes:e.adjacentCellIndexes},nativeOn:{click:function(e){return t.clickHandler(e)},contextmenu:function(e){return e.preventDefault(),t.rightClickHandler(e)}}})],1)}),0)}),0)]),n("Timer"),n("div",{attrs:{id:"version"}},[t._v("\n        version: "+t._s(t.env.VUE_APP_VERSION)+"\n      ")])],1)])],1)}),s=[],l=(n("5df3"),n("1c4c"),n("8615"),n("55dd"),n("4917"),n("ac6a"),n("ffc1"),n("7514"),n("6c7b"),n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cell",class:[t.grassClass,t.explodedClass,t.dirtClass,t.delayClass]},[t.showing?n("div",{staticClass:"adjacentValue"},[t._v("\n        "+t._s(t.adjacents.length)+"\n    ")]):t._e(),t.hasFlag?n("div",{staticClass:"flag"},[n("v-icon",{attrs:{color:"#B71C1C"}},[t._v("mdi-flag-triangle")])],1):t._e()])}),c=[],u={name:"cell",props:{width:Number,row:Number,mine:String,index:Number,adjacents:Array,adjacentCellIndexes:Array},data:function(){return{showing:!1,exploded:!1,hasFlag:!1}},computed:{grassClass:function(){return this.row%2||Math.pow(this.width,2)%2?this.index%2?"lightgrass":"darkgrass":this.index%2?"darkgrass":"lightgrass"},explodedClass:function(){return this.exploded?"puff-out-center exploded":""},dirtClass:function(){return this.showing?"jello-horizontal dirt":""},delayClass:function(){return"animation-delay-"+Math.ceil(10-10*Math.random())}},methods:{reveal:function(){this.hasFlag=!1,this.showing=!0},explode:function(){"o"===this.mine&&(this.exploded=!0)},toggleFlag:function(){this.hasFlag=!this.hasFlag}}},f=u,d=(n("e3d1"),n("2877")),h=n("6544"),m=n.n(h),p=n("132d"),v=Object(d["a"])(f,l,c,!1,null,null,null),g=v.exports;m()(v,{VIcon:p["a"]});var b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"timer"}},[n("div",{attrs:{id:"clock"}},[n("span",{staticClass:"time"},[t._v(t._s(t.time))]),t.showTimerControls?n("div",{staticClass:"btn-container"},[n("a",{attrs:{id:"start"},on:{click:t.start}},[t._v("Start")]),n("a",{attrs:{id:"stop"},on:{click:t.stop}},[t._v("Stop")]),n("a",{attrs:{id:"reset"},on:{click:t.reset}},[t._v("Reset")])]):t._e(),t._m(0)])])},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text"},[n("a",{attrs:{href:"https://june07.com",target:"_blank"}},[t._v("@june07")])])}],_={name:"timer",data:function(){return{showTimerControls:!1,time:"00:00:00.000",timeBegan:null,timeStopped:null,stoppedDuration:0,started:null,running:!1}},methods:{start:function(){this.running||(null===this.timeBegan&&(this.reset(),this.timeBegan=new Date),null!==this.timeStopped&&(this.stoppedDuration+=new Date-this.timeStopped),this.started=setInterval(this.clockRunning,10),this.running=!0)},stop:function(){this.running=!1,this.timeStopped=new Date,clearInterval(this.started)},reset:function(){this.running=!1,clearInterval(this.started),this.stoppedDuration=0,this.timeBegan=null,this.timeStopped=null,this.time="00:00:00.000"},clockRunning:function(){var t=new Date,e=new Date(t-this.timeBegan-this.stoppedDuration),n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();this.time=this.zeroPrefix(n,2)+":"+this.zeroPrefix(r,2)+":"+this.zeroPrefix(i,2)+"."+this.zeroPrefix(o,3)},zeroPrefix:function(t,e){for(var n="",r=0;r<e;r++)n+="0";return(n+t).slice(-e)}}},y=_,w=(n("1070"),Object(d["a"])(y,b,x,!1,null,"0c8d64a8",null)),C=w.exports,j=n("f309");r["a"].use(j["a"]),Array.prototype.unique=function(){for(var t=this.concat(),e=0;e<t.length;++e)for(var n=e+1;n<t.length;++n)t[e]===t[n]&&t.splice(n--,1);return t};var O={name:"gameboard",components:{Cell:g,Timer:C},props:{width:Number,percent:Number,show:Boolean},data:function(){return{env:Object({NODE_ENV:"production",BASE_URL:"/"}),spaces:this.width*this.width,numberOfBombsToPlace:Math.floor(this.width*this.width*(this.percent/100)),mutableShow:this.show,mutableDifficulty:this.width,mutablePercentage:this.percent,exploded:!1,regions:null,revealed:[],started:!1,lose:!1,won:!1}},computed:{initializedGameBoard:function(){return this.arrangeIntoRowsCols(this.randomlyMixBombs(this.numberOfBombsToPlace,this.spaces))}},methods:{randomlyMixBombs:function(t,e){for(var n=new Array(t).fill("o"),r=n.length;n.length<e;r++){var i=r-Math.floor(Math.random()*r);n.splice(i,0,"x")}return this.calculateAdjacencies(n)},getRegionIndexes:function(t,e){switch(t){case"top":return new Array(e-2).fill().map(function(t,e){return e+1});case"right":return new Array(e-2).fill().map(function(t,n){return e*(n+2)-1});case"left":return new Array(e-2).fill().map(function(t,n){return e*(n+1)});case"bottom":return new Array(e-2).fill().map(function(t,n){return e*e-(e-n-1)});case"topleftcorner":return 0;case"toprightcorner":return e-1;case"bottomleftcorner":return e*e-e;case"bottomrightcorner":return e*e-1}},calculateAdjacencies:function(t){var e=this,n=this;function r(t){if(n.regions.innerCells.find(function(e){return e===t}))return o;var e=Object.entries(n.regions).filter(function(t){return!t[0].match(/(outerCells|innerCells)/)}).find(function(e){var n=e[1].cells instanceof Array?e[1].cells:[e[1].cells];if(void 0!==n.find(function(e){return e===t}))return!0});return e[1].offsets}var i=Math.sqrt(t.length),o={left:-1,lefttop:-(i+1),top:-i,righttop:-(i-1),right:1,rightbottom:i+1,bottom:i,leftbottom:i-1};return this.regions={top:{cells:this.getRegionIndexes("top",i),offsets:Object.fromEntries(Object.entries(o).filter(function(t){return!t[0].match(/(lefttop|top|righttop)/)}))},right:{cells:this.getRegionIndexes("right",i),offsets:Object.fromEntries(Object.entries(o).filter(function(t){return!t[0].match(/(right|righttop|rightbottom)/)}))},bottom:{cells:this.getRegionIndexes("bottom",i),offsets:Object.fromEntries(Object.entries(o).filter(function(t){return!t[0].match(/(rightbottom|bottom|leftbottom)/)}))},left:{cells:this.getRegionIndexes("left",i),offsets:Object.fromEntries(Object.entries(o).filter(function(t){return!t[0].match(/(left|lefttop|leftbottom)/)}))},topleftcorner:{cells:this.getRegionIndexes("topleftcorner",i),offsets:Object.fromEntries(Object.entries(o).filter(function(t){return!t[0].match(/(leftbottom|left|lefttop|top|righttop)/)}))},toprightcorner:{cells:this.getRegionIndexes("toprightcorner",i),offsets:Object.fromEntries(Object.entries(o).filter(function(t){return!t[0].match(/(lefttop|top|righttop|right|rightbottom)/)}))},bottomleftcorner:{cells:this.getRegionIndexes("bottomleftcorner",i),offsets:Object.fromEntries(Object.entries(o).filter(function(t){return!t[0].match(/(lefttop|left|leftbottom|bottom|rightbottom)/)}))},bottomrightcorner:{cells:this.getRegionIndexes("bottomrightcorner",i),offsets:Object.fromEntries(Object.entries(o).filter(function(t){return!t[0].match(/(leftbottom|bottom|rightbottom|right|righttop)/)}))}},this.regions.outerCells=Object.values(this.regions).map(function(t){return t.cells}).flatMap(function(t){return t}).sort(function(t,e){return t-e}),this.regions.innerCells=t.map(function(t,n){return e.regions.outerCells.find(function(t){return n===t})?0:n}).filter(function(t){return 0!==t}),t=t.flatMap(function(t,e,n){var i=[],o=[],a=r(e);return Object.entries(a).map(function(t,r,a){var s=e+parseInt(t[1]);if("o"===n[s]&&i.push(t),o.push(s),r===a.length-1)return i}),{value:t,adjacents:i,adjacentCellIndexes:o}}),t},arrangeIntoRowsCols:function(t){for(var e=Math.sqrt(t.length),n=new Array(e).fill().map(function(){return new Array(e).fill()}),r=0,i=0,o=0;r<t.length;r++)n[i][o]=Object.assign(t[r],{index:r}),(r+1)%e===0?(i++,o=0):o++;return n},getCellByIndex:function(t){var e=Array.from(document.querySelectorAll("div.cell")).map(function(t){return t.__vue__}),n=e.find(function(e){return e.index===t});return n},clickHandler:function(t){var e=t.target;!this.started&&document.querySelector("#timer").__vue__.start(),this.reveal(e.__vue__)},rightClickHandler:function(t){var e=t.target;void 0!==e&&void 0!==e.__vue__&&e.__vue__.toggleFlag()},explodeAllMines:function(){Array.from(document.querySelectorAll("div.cell")).map(function(t){return t.__vue__.explode()}),this.lose=!0},reveal:function(t){var e=this;if(t.reveal(),"o"===t.mine)this.explodeAllMines(),document.querySelector("#timer").__vue__.stop(),this.mutableShow=!0;else if("x"===t.mine&&0===t.adjacents.length)t.adjacentCellIndexes.forEach(function(t){void 0===e.revealed.find(function(e){return e===t})&&(e.revealed.push(t),e.reveal(e.getCellByIndex(t),t))});else if("x"===t.mine){var n=t.index;void 0===e.revealed.find(function(t){return t===n})&&(e.revealed.push(n),e.reveal(e.getCellByIndex(n),n))}e.won=e.spaces-e.numberOfBombsToPlace===e.revealed.length,e.won&&document.querySelector("#timer").__vue__.stop()}}},I=O,B=(n("68e4"),n("8336")),A=n("cc20"),E=n("a797"),P=n("8654"),S=Object(d["a"])(I,a,s,!1,null,null,null),k=S.exports;m()(S,{VBtn:B["a"],VChip:A["a"],VIcon:p["a"],VOverlay:E["a"],VTextField:P["a"]});var M={name:"app",components:{Game:k},data:function(){return{gameId:this.uuidv4(),difficulty:12,percent:50}},methods:{reset:function(t,e){return void 0!==e&&("difficulty"===t?this.difficulty=parseInt(this.validateDifficulty(e)):this.percent=parseInt(this.validatePercent(e))),this.gameId=this.uuidv4(),this.gameId},validatePercent:function(t){return""===t||isNaN(t)||t<0||t>100?50:t},validateDifficulty:function(t){return""===t||isNaN(t)||t<2?12:t},uuidv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})}}},D=M,R=(n("034f"),Object(d["a"])(D,i,o,!1,null,null,null)),T=R.exports;r["a"].use(j["a"]);var N=new j["a"]({icons:{iconfont:"mdi"}});r["a"].config.productionTip=!1,new r["a"]({vuetify:N,render:function(t){return t(T)}}).$mount("#app")},"68e4":function(t,e,n){"use strict";var r=n("0656"),i=n.n(r);i.a},a0bb:function(t,e,n){},e3d1:function(t,e,n){"use strict";var r=n("a0bb"),i=n.n(r);i.a}});
//# sourceMappingURL=app.1626525b.js.map